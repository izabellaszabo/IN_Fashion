<% content_for :title do %>
Product Details
<% end %>

<% content_for :header do %>
<% end %>

<% content_for :content do %>
<div id="itemcont">
<div id="breadcrumbs">
  <ul>
    <li>
      <h4><%= link_to "Home", :action => 'home', :controller => :site %></h4>
    </li>
    <li>
      >
    </li>
    <li>
      <h4><%= link_to @product.Catagory.titlecase, :action => @product.Catagory, :controller => :products %></h4>
    </li>
    <li>
      >
    </li>
    <li>
      <h4><%= link_to @product.subcategory.titlecase, :action => 'subcategory', 
        :subcategory => @product.subcategory, :breadcrumbsCategory => @product.Catagory %>
      </h4>
    </li>
    <li>
      >
    </li>
  </ul>
</div>

<div id="item">

  <h2><%= @product.Title %></h2>
  
  <div id="itemimg">
    <%= image_tag @product.image_url %>
  </div>
  
  <div id="itemdesc">
    <h4 id="itemprice"><%= number_with_precision(@product.price, precision: 2) %></h4>
    
    <div id="rating">
      <span>☆</span>
      <span>☆</span>
      <span>☆</span>
      <span>☆</span>
      <span>☆</span>
      <br/>
      <ul id="review">
        <li>
          <h4><a id="review_trigger" href="#reviews">View Reviews</a></h4> 
        </li>
        <li>
          ||
        </li>
        <li>
          <h4><%= link_to "Review this Product", new_review_path(:productid => @product.id) %></h4>
        </li>
      </ul>
    </div>

    <div id="desc">
      <%= @product.Description %>
      <br/>
      <%= @product.features %>
    </div>
    
    
    <div id="size">
      <select class="dropdown">
        <option value="default">Choose your size...</option>
        <option value="xs">X-Small</option>
        <option value="s">Small</option>
        <option value="m">Medium</option>
        <option value="l">Large</option>
        <option value="xl">X-Large</option>
      </select>
    </div>  
    
    <div id="color">
      <select class="dropdown">
        <option value="default">Choose a color...</option>
        <option value="red">Red</option>
      </select>
    </div>
    
    <div id="quantity">
      <input type="number" name="quantity" min="1" max="100" placeholder="Quantity" />
    </div>
    
    <div id="itemaddtocart">
      <!-- Color and Size have to be validated before added to cart? -->
      <h4><a href="#">Add to Cart</a></h4>
    </div>
  </div>

</div>

<div id="recommended">
 <h3 id="recommendedh3">Recommended for you</h3>
 <table id="productsTable">
    <col width="23%" />
    <col width="23%" />
    <col width="23%" />
    <col width="23%" />
 
 <% @recommended.each_with_index do |product, index| %>
  <% if index % 4 == 0 %>
   <tr>
  <% end %>
   <td>
    <div class="eachproduct">
     <%= link_to image_tag(product.image_url, :class => "productsimg"), product %>
     <h3 class="title"><%= link_to product.Title, product %></h3>
    </div>
   </td>
   <% if index % 4 == 3 %>
    </tr>
   <% end %>
 <% end %>
 </table>
</div>

<div id="reviews" class="reviewsContainer" style="display:none;">
		<header class="popupHeader">
			<div class="header_title">Reviews</div>
			<div class="modal_close">Close</div>
		</header>
		
		<section class="popupBody">
			<!-- View Reviews -->
			<div class="view_reviews">
				<% if @reviews.length != 0 %>
				  <% @reviews.each do |review| %>
				  <div id="reviewDate">
				    <%= review.Date.strftime("%Y-%m-%d") %>
				  </div>
				  <div>
				    <%= review.summary %>
				  </div>
				  <div>
				    <%= review.Comment %>
				  </div>
				  <div>
				    <%= review.Rating %>
				  </div>
				  <% end %>

				<% else %>
				<p>
				  This product hasn't been reviewed yet.
				</p>
				<p>
					Be the first to review this product <%= link_to "Here", new_review_path, :class => 'signup' %>!
				</p>
				<% end %>
			</div>
		</section>
</div>
</div>
	<script type="text/javascript">
	  $("#review_trigger").leanModal({top : 200, overlay : 0.6, closeButton: ".modal_close" });
	
  	function getNewRating() {
  	  
  	}
  	
	</script>
</div>

<% end %>